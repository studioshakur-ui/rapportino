/* src/index.css */
@tailwind base;
@tailwind components;
@tailwind utilities;

:root {
  font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
}

body {
  @apply bg-slate-100 text-slate-900;
}

/* =========================================================
   RAPPORTINO — DOCUMENT CANONIQUE + PRINT PREVIEW
   Objectif: UX large à l'écran, mais PRINT = A4 propre.
   ========================================================= */

/* Document container (écran) */
.rapportino-document {
  width: min(1400px, 100%);
  margin: 0 auto;
  padding: 12mm 12mm;
  border-radius: 10px;
}

/* Lock scroll in preview */
html.print-preview,
body.print-preview {
  overflow: hidden !important;
}

/* Print preview: lift the document into overlay (same DOM) */
html.print-preview #rapportino-document {
  position: fixed;
  top: 64px; /* laisse la place à la barre d'actions overlay */
  left: 50%;
  transform: translateX(-50%);
  z-index: 65;
  width: min(210mm, calc(100vw - 18px));
  max-height: calc(100vh - 120px);
  overflow: auto;
  -webkit-overflow-scrolling: touch;
  background: #ffffff;
  box-shadow: 0 18px 45px rgba(0, 0, 0, 0.45);
  border-radius: 10px;
}

@media (max-width: 640px) {
  .rapportino-document {
    padding: 10mm 7mm;
    border-radius: 8px;
  }

  html.print-preview #rapportino-document {
    top: 70px;
    width: calc(100vw - 16px);
    border-radius: 8px;
  }
}

/* ====== TABLE RAPPORTINO (papier) ====== */

.rapportino-table {
  font-family: "Times New Roman", Times, serif;
  border-collapse: collapse;
  width: 100%;
}

.rapportino-table th,
.rapportino-table td {
  border: 0.6px solid #111827; /* slate-900 */
  vertical-align: top;
}

/* Textareas auto-height (zéro scroll interne) */
.rapportino-textarea {
  resize: none;
  overflow: hidden;
  min-height: 22px;
  line-height: 1.15;
}

/* Texte print-only (respecte les retours ligne) */
.rapportino-print-text {
  white-space: pre-wrap;
  line-height: 1.15;
}

/* Utilitaires */
.no-print { /* visible écran, caché print */ }
.print-only { display: none; }

/* ====== PRINT A4 PORTRAIT – SHEET ONLY (BLINDÉ) ====== */
@media print {
  @page {
    size: A4 portrait;
    margin: 0;
  }

  html,
  body,
  #root {
    height: auto !important;
    min-height: 0 !important;
    margin: 0 !important;
    padding: 0 !important;
    background: #ffffff !important;
  }

  /* KILL SWITCH: tout cacher... */
  body * {
    visibility: hidden !important;
  }

  /* ... puis ne rendre visible QUE la feuille */
  #rapportino-document,
  #rapportino-document * {
    visibility: visible !important;
  }

  /* Positionner la feuille en haut-gauche */
  #rapportino-document {
    position: absolute !important;
    left: 0 !important;
    top: 0 !important;
  }

  /* La feuille A4 */
  .rapportino-document {
    width: 210mm !important;
    min-height: 297mm !important;
    margin: 0 !important;
    padding: 10mm 10mm !important;
    border-radius: 0 !important;
    box-shadow: none !important;
    border: none !important;
    background: #ffffff !important;
  }

  /* no-print / print-only */
  .no-print { display: none !important; }
  .print-only { display: block !important; }

  /* Retire la colonne suppression à l'impression (dernier th/td) */
  #rapportino-document table thead th:last-child,
  #rapportino-document table tbody td:last-child {
    display: none !important;
  }

  /* Répéter entête tableau si pagination */
  .rapportino-table thead { display: table-header-group; }
  .rapportino-table tr { page-break-inside: avoid; }
}
