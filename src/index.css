/* src/index.css */
@tailwind base;
@tailwind components;
@tailwind utilities;

/* =========================================================
   GLOBALS
   ========================================================= */

:root {
  color-scheme: dark;
  font-family: ui-sans-serif, system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
}

body {
  @apply bg-slate-950 text-slate-100;
}

/* =========================================================
   RAPPORTINO – AIDE UX (écran)
   ========================================================= */
.rapportino-document {
  /* rien de spécial ici : le print override gère tout */
}

.rapportino-table {
  width: 100%;
}

/* =========================================================
   PRINT – RAPPORTINO (A4 propre, 1 page si contenu <= A4)
   Correction “2 feuilles”:
   - pas de visibility-hack qui garde le layout
   - shell retiré du flux
   - feuille sortie du flux => pas de page fantôme
   ========================================================= */
@media print {
  @page {
    size: A4 portrait;
    margin: 10mm;
  }

  html,
  body {
    width: 210mm !important;
    height: auto !important;
    margin: 0 !important;
    padding: 0 !important;
    background: #fff !important;
    -webkit-print-color-adjust: exact;
    print-color-adjust: exact;
  }

  /* Masquer complètement le shell (ne doit pas influencer la pagination) */
  header,
  nav,
  aside,
  .no-print {
    display: none !important;
  }

  /* Ne laisse pas les wrappers imposer des tailles/paddings */
  #root,
  main,
  .min-h-screen,
  .flex,
  .flex-col {
    min-height: 0 !important;
    height: auto !important;
  }

  /* IMPORTANT:
     On sort le document du flow pour éviter "page fantôme"
     causée par des éléments masqués (visibility) ou des wrappers.
   */
  #rapportino-document {
    position: absolute !important;
    left: 0 !important;
    top: 0 !important;

    width: 100% !important;
    max-width: none !important;

    margin: 0 !important;
    padding: 0 !important;

    border: none !important;
    border-radius: 0 !important;
    box-shadow: none !important;
    background: #fff !important;

    transform: none !important;
    overflow: visible !important;

    page-break-inside: avoid !important;
    break-inside: avoid !important;
  }

  #rapportino-document * {
    box-shadow: none !important;
    text-shadow: none !important;
  }

  table {
    width: 100% !important;
    border-collapse: collapse !important;
  }

  thead {
    display: table-header-group;
  }

  tr,
  td,
  th {
    break-inside: avoid !important;
    page-break-inside: avoid !important;
  }

  /* Retire la colonne suppression à l'impression (dernier th/td) */
  #rapportino-document table thead th:last-child,
  #rapportino-document table tbody td:last-child {
    display: none !important;
  }
}
