# SCHEMA CANONIQUE – CORE (auto-généré)

> Généré automatiquement à partir de `schema_snapshot.sql`.
> La vérité technique reste le snapshot SQL.

---

## ENUMS

- "public"."activity_type"
- "public"."activity_unit"
- "public"."app_role"
- "public"."attachment_kind"
- "public"."cavo_step_type"
- "public"."crew_role"
- "public"."doc_categoria"
- "public"."doc_origine"
- "public"."doc_stato"
- "public"."kpi_period"
- "public"."percorso_lot_status"
- "public"."percorso_sviluppo_by"
- "public"."plan_period_type"
- "public"."plan_status"
- "public"."rapportino_status"
- "public"."report_status"
- "public"."user_role"


## TABLES

- IF


## VIEWS

- "public"."admin_capo_manager_v1"
- "public"."admin_manager_perimeter_v1"
- "public"."admin_planning_overview_v1"
- "public"."admin_ship_capos_v1"
- "public"."admin_ship_operators_v1"
- "public"."admin_ship_resolution_anomalies_v1"
- "public"."archive_rapportini_v1"
- "public"."archive_rapportino_cavi_v1"
- "public"."archive_rapportino_inca_cavi_v1"
- "public"."archive_rapportino_rows_v1"
- "public"."capo_my_team_v1"
- "public"."capo_my_team_v2"
- "public"."capo_returned_inbox_v1"
- "public"."catalogo_ship_commessa_attivita_public_v1"
- "public"."direzione_inca_teorico"
- "public"."direzione_inca_vs_rapportini"
- "public"."direzione_operator_daily_v3"
- "public"."direzione_operator_facts_v1"
- "public"."direzione_operator_facts_v2"
- "public"."direzione_operator_facts_v3"
- "public"."direzione_operator_facts_v4"
- "public"."direzione_operator_kpi_day_v1"
- "public"."direzione_operator_kpi_day_v2"
- "public"."direzione_operator_kpi_day_v3"
- "public"."direzione_operator_kpi_day_v3_manager_safe"
- "public"."direzione_operator_kpi_day_v4_manager_safe"
- "public"."direzione_operator_kpi_month_v1"
- "public"."direzione_operator_kpi_month_v2"
- "public"."direzione_operator_kpi_month_v3"
- "public"."direzione_operator_kpi_week_v1"
- "public"."direzione_operator_kpi_week_v2"
- "public"."direzione_operator_kpi_week_v3"
- "public"."direzione_operator_kpi_year_v1"
- "public"."direzione_operator_kpi_year_v2"
- "public"."direzione_operator_kpi_year_v3"
- "public"."inca_cavi_with_data_posa_v1"
- "public"."inca_cavi_with_last_posa_and_capo_v1"
- "public"."inca_cavi_with_last_posa_v1"
- "public"."inca_cavi_with_last_rapportino_v1"
- "public"."inca_cavi_with_path"
- "public"."inca_export_ufficio_v1"
- "public"."inca_percorsi_nodes_v1"
- "public"."inca_percorsi_v1"
- "public"."inca_rows"
- "public"."kpi_operator_daily_v1"
- "public"."kpi_operator_day_v1"
- "public"."kpi_operator_family_day_v2"
- "public"."kpi_operator_family_day_v3"
- "public"."kpi_operator_family_day_v3_capo_safe"
- "public"."kpi_operator_family_day_v3_manager_safe"
- "public"."kpi_operator_global_day_v2"
- "public"."kpi_operator_global_day_v3"
- "public"."kpi_operator_global_day_v3_capo_safe"
- "public"."kpi_operator_global_day_v3_manager_safe"
- "public"."kpi_operator_line_previsto_v2"
- "public"."kpi_operator_line_v1"
- "public"."kpi_operator_productivity_daily_v1"
- "public"."kpi_operatori_day_v1"
- "public"."kpi_operatori_day_v2"
- "public"."kpi_operatori_month_v1"
- "public"."kpi_operatori_week_v1"
- "public"."kpi_operatori_year_v1"
- "public"."manager_my_capi_v1"
- "public"."navemaster_latest_import_v1"
- "public"."navemaster_live_v1"
- "public"."operator_facts_v1"
- "public"."operators_admin_list_v1"
- "public"."operators_display_v1"
- "public"."operators_display_v2"
- "public"."percorso_documents_stats_v1"
- "public"."rapportini_canon_v1"
- "public"."rapportini_norm_v1"
- "public"."rapportini_ship_resolution_v1"
- "public"."rapportini_with_capo_v1"
- "public"."ships_norm_v1"
- "public"."ufficio_rapportini_list_v1"


## FUNCTIONS

- "public"."admin_set_manager_for_capo"
- "public"."admin_set_operator_identity"
- "public"."capo_my_ships_v1"
- "public"."capo_owns_rapportino_row"
- "public"."capo_returned_summary"
- "public"."capo_returned_summary_debug"
- "public"."clear_inca_tables"
- "public"."core_app_role"
- "public"."core_app_role_upper"
- "public"."core_apply_rapportino_inca_progress"
- "public"."core_current_profile"
- "public"."core_db_version"
- "public"."core_drive_append_event"
- "public"."core_drive_assert_role"
- "public"."core_drive_current_role"
- "public"."core_drive_emit_upload_event"
- "public"."core_drive_events_block_mutations"
- "public"."core_drive_freeze_file"
- "public"."core_drive_soft_delete_file"
- "public"."core_is_admin"
- "public"."core_parse_tempo_hours"
- "public"."core_profiles_public_by_ids"
- "public"."core_status_text"
- "public"."current_profile"
- "public"."fn_consolidate_inca_on_rapportino_approved"
- "public"."fn_fill_plan_id_on_slot_member"
- "public"."fn_hydrate_rapportino_inca_cavi_caches"
- "public"."fn_normalize_commessa_upper"
- "public"."fn_operator_auto_normalize"
- "public"."fn_operator_identity_required"
- "public"."fn_operator_key"
- "public"."fn_rapportino_apply_product"
- "public"."handle_new_user"
- "public"."inca_search_cavi_by_nodes"
- "public"."is_admin"
- "public"."is_rapportino_approved"
- "public"."is_role"
- "public"."is_ufficio"
- "public"."log_core_file_action"
- "public"."manager_my_capi"
- "public"."manager_my_capi_v1"
- "public"."manager_my_operators_v1"
- "public"."manager_my_ships_v1"
- "public"."navemaster_can_manage"
- "public"."normalize_inca_situazione"
- "public"."percorso_propose_lots"
- "public"."ping"
- "public"."prevent_update_on_frozen_files"
- "public"."recompute_operator_kpi_snapshot"
- "public"."replace_core_file_version"
- "public"."set_profile_updated_at"
- "public"."set_rapportini_capo_id"
- "public"."set_rapportino_row_updated_at"
- "public"."set_rapportino_updated_at"
- "public"."set_updated_at"
- "public"."sync_capo_id_from_user_id"
- "public"."trg_archive_on_rapportino_approved"
- "public"."trg_auto_tp_from_progress"
- "public"."trg_fill_rapportino_inca_cache"
- "public"."trg_operators_require_identity"
- "public"."trg_operators_set_operator_key"
- "public"."trg_rapportini_apply_inca_progress_on_status"
- "public"."trg_rapportini_on_status_product"
- "public"."ufficio_approve_rapportino"
- "public"."ufficio_create_correction_rapportino"
- "public"."updated_at"


## RLS / POLICIES

- "Profiles
- "admin_read_all_kpi_facts"
- "admin_read_all_kpi_snapshots"
- "admin_read_all_manager_capo_scope"
- "admin_read_all_manager_plans"
- "admin_read_all_plan_capo_slots"
- "admin_read_all_plan_slot_members"
- "admin_read_all_planning_audit"
- "audit_select_direzione"
- "capo
- "capo_delete_rapportini_own"
- "capo_delete_rapportino_inca"
- "capo_delete_rows_own"
- "capo_insert_rapportini_own"
- "capo_insert_rapportino_cavi"
- "capo_insert_rapportino_inca"
- "capo_insert_rows_own"
- "capo_manage_rapportino_rows"
- "capo_read_own_members"
- "capo_read_own_slots"
- "capo_select_rapportini_own"
- "capo_select_rapportino_cavi"
- "capo_select_rapportino_inca"
- "capo_select_rows_own"
- "capo_update_rapportini_own"
- "capo_update_rapportino_cavi"
- "capo_update_rapportino_inca"
- "capo_update_rows_own"
- "capo_validate"
- "catalogo_attivita_delete_admin"
- "catalogo_attivita_insert_admin"
- "catalogo_attivita_read"
- "catalogo_attivita_select_authenticated"
- "catalogo_attivita_update_admin"
- "catalogo_attivita_write_admin"
- "catalogo_ship_commessa_read"
- "catalogo_ship_commessa_write_admin"
- "core_drive_events_select_via_core_files"
- "core_files_delete_direzione"
- "core_files_insert"
- "core_files_select"
- "core_files_update"
- "create_lots"
- "impianti_admin_all"
- "impianti_manager_read_perimeter"
- "impianto_capi_admin_all"
- "impianto_capi_manager_read_perimeter"
- "inca_cavi_capo_select"
- "inca_cavi_direzione_select"
- "inca_cavi_manager_select"
- "inca_cavi_read_auth"
- "inca_cavi_select_staff"
- "inca_cavi_ufficio_mutate"
- "inca_cavi_ufficio_select"
- "inca_cavi_write_ufficio_admin"
- "inca_files_capo_select"
- "inca_files_direzione_select"
- "inca_files_insert"
- "inca_files_insert_staff"
- "inca_files_manager_select"
- "inca_files_read_auth"
- "inca_files_select"
- "inca_files_select_staff"
- "inca_files_ufficio_mutate"
- "inca_files_ufficio_select"
- "inca_files_update"
- "inca_files_write_ufficio_admin"
- "inca_percorsi_read_auth"
- "inca_percorsi_write_ufficio_admin"
- "insert_own_inca_cavi"
- "manager_insert_audit"
- "manager_read_own_assignments"
- "manager_read_own_audit"
- "manager_read_own_plans"
- "manager_read_own_scope"
- "manager_rw_members_via_plan"
- "manager_rw_slots_via_plan"
- "manager_write_own_plans"
- "manager_write_own_scope"
- "mca_admin_all"
- "mca_manager_read_own"
- "models_select_owner_or_direction"
- "models_update_owner_only"
- "models_upsert_owner_only"
- "navemaster_imports_read"
- "navemaster_imports_write"
- "navemaster_rows_read"
- "navemaster_rows_write"
- "objectives_select_all_for_direction"
- "objectives_write_direction"
- "operators_admin_all"
- "operators_read_all_for_logged"
- "owner_rapportino_can_crud"
- "patterns_select_owner_only"
- "patterns_write_owner_only"
- "percorso_documents_insert_service_role"
- "percorso_documents_insert_ufficio"
- "percorso_documents_select_authenticated"
- "profiles
- "profiles_admin_select_all"
- "profiles_insert_own"
- "profiles_self_select"
- "profiles_self_update"
- "profiles_update_own"
- "rapportini_capo_insert"
- "rapportini_capo_update"
- "rapportini_direzione_select"
- "rapportini_manager_select"
- "rapportini_manager_select_perimeter"
- "rapportini_modify_own"
- "rapportini_select_own"
- "rapportini_select_ufficio"
- "rapportini_ufficio_select"
- "rapportini_ufficio_update"
- "rapportini_update_ufficio"
- "rapportino_rows_backoffice_select_fast"
- "rapportino_rows_via_own_rapportino"
- "read_all_docs"
- "rro_delete"
- "rro_insert"
- "rro_select"
- "rro_update"
- "select_own_inca_cavi"
- "ship_capos_admin_all"
- "ship_capos_capo_select_own"
- "ship_capos_manager_select_perimeter"
- "ship_managers_admin_all"
- "ship_managers_manager_select_own"
- "ship_operators_admin_all"
- "ship_operators_admin_insert"
- "ship_operators_admin_select"
- "ship_operators_admin_update"
- "ship_operators_manager_select_perimeter"
- "ships_admin_select"
- "ships_office_select"
- "ufficio
- "ufficio_direzione_select_rapportino_cavi"
- "ufficio_validate"



---
## Notes
- Ce document est une **vue lisible**.
- Toute modification DB doit mettre à jour le snapshot et le changelog.
